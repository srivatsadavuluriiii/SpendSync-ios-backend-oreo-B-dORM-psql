"use strict";var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");_Object$defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _express = _interopRequireDefault(require("express"));
var _joi = _interopRequireDefault(require("joi"));
var _validation = require("../../middleware/validation");
var _controller = require("./controller");
var _schemas = require("./schemas");

const router = _express.default.Router();
const controller = new _controller.AnalyticsController();

// Analytics event tracking endpoint
router.post('/track',
(0, _validation.sizeLimit)('50kb'),
(0, _validation.validateRequest)(_schemas.analyticsSchemas.trackEvent),
controller.trackEvent
);

// Batch analytics events endpoint
router.post('/batch',
(0, _validation.sizeLimit)('1mb'),
(0, _validation.validateRequest)(_schemas.analyticsSchemas.batchEvents),
controller.trackBatchEvents
);

// Analytics query endpoint
router.get('/query',
(0, _validation.validateRequest)(_schemas.analyticsSchemas.queryAnalytics),
controller.queryAnalytics
);var _default = exports.default =

router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2pvaSIsIl92YWxpZGF0aW9uIiwiX2NvbnRyb2xsZXIiLCJfc2NoZW1hcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJjb250cm9sbGVyIiwiQW5hbHl0aWNzQ29udHJvbGxlciIsInBvc3QiLCJzaXplTGltaXQiLCJ2YWxpZGF0ZVJlcXVlc3QiLCJhbmFseXRpY3NTY2hlbWFzIiwidHJhY2tFdmVudCIsImJhdGNoRXZlbnRzIiwidHJhY2tCYXRjaEV2ZW50cyIsImdldCIsInF1ZXJ5QW5hbHl0aWNzIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9hbmFseXRpY3MvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5pbXBvcnQgeyB2YWxpZGF0ZVJlcXVlc3QsIHNpemVMaW1pdCB9IGZyb20gJy4uLy4uL21pZGRsZXdhcmUvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBBbmFseXRpY3NDb250cm9sbGVyIH0gZnJvbSAnLi9jb250cm9sbGVyJztcbmltcG9ydCB7IGFuYWx5dGljc1NjaGVtYXMgfSBmcm9tICcuL3NjaGVtYXMnO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3QgY29udHJvbGxlciA9IG5ldyBBbmFseXRpY3NDb250cm9sbGVyKCk7XG5cbi8vIEFuYWx5dGljcyBldmVudCB0cmFja2luZyBlbmRwb2ludFxucm91dGVyLnBvc3QoJy90cmFjaycsXG4gIHNpemVMaW1pdCgnNTBrYicpLFxuICB2YWxpZGF0ZVJlcXVlc3QoYW5hbHl0aWNzU2NoZW1hcy50cmFja0V2ZW50KSxcbiAgY29udHJvbGxlci50cmFja0V2ZW50XG4pO1xuXG4vLyBCYXRjaCBhbmFseXRpY3MgZXZlbnRzIGVuZHBvaW50XG5yb3V0ZXIucG9zdCgnL2JhdGNoJyxcbiAgc2l6ZUxpbWl0KCcxbWInKSxcbiAgdmFsaWRhdGVSZXF1ZXN0KGFuYWx5dGljc1NjaGVtYXMuYmF0Y2hFdmVudHMpLFxuICBjb250cm9sbGVyLnRyYWNrQmF0Y2hFdmVudHNcbik7XG5cbi8vIEFuYWx5dGljcyBxdWVyeSBlbmRwb2ludFxucm91dGVyLmdldCgnL3F1ZXJ5JyxcbiAgdmFsaWRhdGVSZXF1ZXN0KGFuYWx5dGljc1NjaGVtYXMucXVlcnlBbmFseXRpY3MpLFxuICBjb250cm9sbGVyLnF1ZXJ5QW5hbHl0aWNzXG4pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7ICJdLCJtYXBwaW5ncyI6InVTQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLElBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFdBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFdBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFFBQUEsR0FBQUosT0FBQTs7QUFFQSxNQUFNSyxNQUFNLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLFVBQVUsR0FBRyxJQUFJQywrQkFBbUIsQ0FBQyxDQUFDOztBQUU1QztBQUNBSixNQUFNLENBQUNLLElBQUksQ0FBQyxRQUFRO0FBQ2xCLElBQUFDLHFCQUFTLEVBQUMsTUFBTSxDQUFDO0FBQ2pCLElBQUFDLDJCQUFlLEVBQUNDLHlCQUFnQixDQUFDQyxVQUFVLENBQUM7QUFDNUNOLFVBQVUsQ0FBQ007QUFDYixDQUFDOztBQUVEO0FBQ0FULE1BQU0sQ0FBQ0ssSUFBSSxDQUFDLFFBQVE7QUFDbEIsSUFBQUMscUJBQVMsRUFBQyxLQUFLLENBQUM7QUFDaEIsSUFBQUMsMkJBQWUsRUFBQ0MseUJBQWdCLENBQUNFLFdBQVcsQ0FBQztBQUM3Q1AsVUFBVSxDQUFDUTtBQUNiLENBQUM7O0FBRUQ7QUFDQVgsTUFBTSxDQUFDWSxHQUFHLENBQUMsUUFBUTtBQUNqQixJQUFBTCwyQkFBZSxFQUFDQyx5QkFBZ0IsQ0FBQ0ssY0FBYyxDQUFDO0FBQ2hEVixVQUFVLENBQUNVO0FBQ2IsQ0FBQyxDQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBOztBQUVhaEIsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==