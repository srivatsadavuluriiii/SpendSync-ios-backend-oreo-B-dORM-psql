"use strict";var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _forEach = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/for-each"));var _now = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/date/now"));var _map = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map"));var _fill = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/fill"));var _promise = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/promise"));var _supertest = _interopRequireDefault(require("supertest"));
var _setup = require("../setup.js");





var _index = _interopRequireDefault(require("../../src/index.js"));
var _AnalyticsEvent = _interopRequireDefault(require("../../src/models/AnalyticsEvent.js"));

describe('API Endpoint Tests', () => {
  beforeAll(async () => {
    await (0, _setup.setupTestDB)();
  });

  afterAll(async () => {
    await (0, _setup.teardownTestDB)();
  });

  beforeEach(async () => {
    await _AnalyticsEvent.default.deleteMany({});
  });

  describe('Health Check Endpoint', () => {
    test('should return service health status', async () => {
      const response = await (0, _supertest.default)(_index.default).
      get('/health').
      expect(200);

      expect(response.body).toEqual({
        status: 'UP',
        service: 'analytics-service',
        timestamp: expect.any(String)
      });
    });
  });

  describe('Spending Analytics Endpoints', () => {
    beforeEach(async () => {
      const testData = (0, _setup.generateTestExpenses)(100);
      await _AnalyticsEvent.default.insertMany(testData);
    });

    test('should return spending patterns with valid user ID', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/spending').
      set('user-id', userId).
      expect(200);

      expect(response.body).toHaveProperty('timeframe');
      expect(response.body).toHaveProperty('totalSpending');
      expect(response.body).toHaveProperty('categoryBreakdown');
      expect(response.body.categoryBreakdown).toBeInstanceOf(Array);
    });

    test('should handle missing user ID', async () => {
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/spending').
      expect(401);

      expect(response.body).toHaveProperty('error', 'User ID is required');
    });

    test('should handle date range filters', async () => {
      const userId = 'test-user-1';
      const startDate = new Date('2024-01-01').toISOString();
      const endDate = new Date('2024-01-31').toISOString();

      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/spending').
      set('user-id', userId).
      query({ startDate, endDate }).
      expect(200);

      expect(response.body.timeframe.startDate).toBe(startDate);
      expect(response.body.timeframe.endDate).toBe(endDate);
    });
  });

  describe('Insights Endpoints', () => {
    beforeEach(async () => {
      const testData = (0, _setup.generateTestExpenses)(200);
      await _AnalyticsEvent.default.insertMany(testData);
    });

    test('should generate financial insights', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/insights').
      set('user-id', userId).
      expect(200);

      expect(response.body).toHaveProperty('insights');
      expect(response.body.insights).toBeInstanceOf(Array);
      expect(response.body.insights.length).toBeGreaterThan(0);

      // Verify insight structure
      const insight = response.body.insights[0];
      expect(insight).toHaveProperty('type');
      expect(insight).toHaveProperty('message');
      expect(insight).toHaveProperty('severity');
    });

    test('should return savings recommendations', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/insights/recommendations').
      set('user-id', userId).
      expect(200);

      expect(response.body).toHaveProperty('recommendations');
      expect(response.body.recommendations).toBeInstanceOf(Array);

      // Verify recommendation structure
      if (response.body.recommendations.length > 0) {
        const recommendation = response.body.recommendations[0];
        expect(recommendation).toHaveProperty('category');
        expect(recommendation).toHaveProperty('message');
        expect(recommendation).toHaveProperty('priority');
      }
    });
  });

  describe('Predictions Endpoints', () => {
    beforeEach(async () => {
      const testData = (0, _setup.generateTestExpenses)(300);
      await _AnalyticsEvent.default.insertMany(testData);
    });

    test('should generate spending predictions', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/predictions').
      set('user-id', userId).
      expect(200);

      expect(response.body).toHaveProperty('predictions');
      expect(response.body.predictions).toBeInstanceOf(Array);

      // Verify prediction structure
      const prediction = response.body.predictions[0];
      expect(prediction).toHaveProperty('category');
      expect(prediction).toHaveProperty('predictedAmount');
      expect(prediction).toHaveProperty('confidence');
    });

    test('should handle prediction timeframe parameter', async () => {var _context;
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/predictions').
      set('user-id', userId).
      query({ months: 3 }).
      expect(200);

      expect(response.body.predictions.length).toBe(3);
      (0, _forEach.default)(_context = response.body.predictions).call(_context, (prediction) => {
        expect(prediction).toHaveProperty('month');
        expect(prediction).toHaveProperty('predictedAmount');
      });
    });
  });

  describe('Budget Analysis Endpoints', () => {
    beforeEach(async () => {
      const testData = (0, _setup.generateTestExpenses)(150);
      await _AnalyticsEvent.default.insertMany(testData);
    });

    test('should return budget analysis', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/budgets').
      set('user-id', userId).
      expect(200);

      expect(response.body).toHaveProperty('budgetAnalysis');
      expect(response.body.budgetAnalysis).toHaveProperty('overview');
      expect(response.body.budgetAnalysis).toHaveProperty('categoryBreakdown');
    });

    test('should handle budget comparison periods', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/budgets/comparison').
      set('user-id', userId).
      query({ period: 'month' }).
      expect(200);

      expect(response.body).toHaveProperty('currentPeriod');
      expect(response.body).toHaveProperty('previousPeriod');
      expect(response.body).toHaveProperty('variance');
    });
  });

  describe('Error Handling', () => {
    test('should handle invalid date parameters', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/spending').
      set('user-id', userId).
      query({ startDate: 'invalid-date' }).
      expect(400);

      expect(response.body).toHaveProperty('error');
    });

    test('should handle invalid category filters', async () => {
      const userId = 'test-user-1';
      const response = await (0, _supertest.default)(_index.default).
      get('/analytics/spending').
      set('user-id', userId).
      query({ category: 'invalid-category' }).
      expect(400);

      expect(response.body).toHaveProperty('error');
    });
  });

  describe('Performance Requirements', () => {
    test('should respond within performance threshold', async () => {
      const userId = 'test-user-1';
      const startTime = (0, _now.default)();

      await (0, _supertest.default)(_index.default).
      get('/analytics/insights').
      set('user-id', userId).
      expect(200);

      const responseTime = (0, _now.default)() - startTime;
      expect(responseTime).toBeLessThan(_setup.performanceThresholds.responseTime);
    });

    test('should handle concurrent requests efficiently', async () => {var _context2, _context3;
      const userId = 'test-user-1';
      const concurrentRequests = 10;

      const requests = (0, _map.default)(_context2 = (0, _fill.default)(_context3 = Array(concurrentRequests)).call(_context3)).call(_context2, () =>
      (0, _supertest.default)(_index.default).
      get('/analytics/spending').
      set('user-id', userId)
      );

      const startTime = (0, _now.default)();
      await _promise.default.all(requests);
      const totalTime = (0, _now.default)() - startTime;

      expect(totalTime).toBeLessThan(_setup.performanceThresholds.responseTime * concurrentRequests);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3VwZXJ0ZXN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfc2V0dXAiLCJfaW5kZXgiLCJfQW5hbHl0aWNzRXZlbnQiLCJkZXNjcmliZSIsImJlZm9yZUFsbCIsInNldHVwVGVzdERCIiwiYWZ0ZXJBbGwiLCJ0ZWFyZG93blRlc3REQiIsImJlZm9yZUVhY2giLCJBbmFseXRpY3NFdmVudCIsImRlbGV0ZU1hbnkiLCJ0ZXN0IiwicmVzcG9uc2UiLCJyZXF1ZXN0IiwiYXBwIiwiZ2V0IiwiZXhwZWN0IiwiYm9keSIsInRvRXF1YWwiLCJzdGF0dXMiLCJzZXJ2aWNlIiwidGltZXN0YW1wIiwiYW55IiwiU3RyaW5nIiwidGVzdERhdGEiLCJnZW5lcmF0ZVRlc3RFeHBlbnNlcyIsImluc2VydE1hbnkiLCJ1c2VySWQiLCJzZXQiLCJ0b0hhdmVQcm9wZXJ0eSIsImNhdGVnb3J5QnJlYWtkb3duIiwidG9CZUluc3RhbmNlT2YiLCJBcnJheSIsInN0YXJ0RGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVuZERhdGUiLCJxdWVyeSIsInRpbWVmcmFtZSIsInRvQmUiLCJpbnNpZ2h0cyIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiIsImluc2lnaHQiLCJyZWNvbW1lbmRhdGlvbnMiLCJyZWNvbW1lbmRhdGlvbiIsInByZWRpY3Rpb25zIiwicHJlZGljdGlvbiIsIl9jb250ZXh0IiwibW9udGhzIiwiX2ZvckVhY2giLCJkZWZhdWx0IiwiY2FsbCIsImJ1ZGdldEFuYWx5c2lzIiwicGVyaW9kIiwiY2F0ZWdvcnkiLCJzdGFydFRpbWUiLCJfbm93IiwicmVzcG9uc2VUaW1lIiwidG9CZUxlc3NUaGFuIiwicGVyZm9ybWFuY2VUaHJlc2hvbGRzIiwiX2NvbnRleHQyIiwiX2NvbnRleHQzIiwiY29uY3VycmVudFJlcXVlc3RzIiwicmVxdWVzdHMiLCJfbWFwIiwiX2ZpbGwiLCJfcHJvbWlzZSIsImFsbCIsInRvdGFsVGltZSJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9hbmFseXRpY3Mtc2VydmljZS9fX3Rlc3RzX18vYXBpL2VuZHBvaW50cy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgeyBcbiAgc2V0dXBUZXN0REIsIFxuICB0ZWFyZG93blRlc3REQiwgXG4gIGdlbmVyYXRlVGVzdEV4cGVuc2VzLFxuICBwZXJmb3JtYW5jZVRocmVzaG9sZHMgXG59IGZyb20gJy4uL3NldHVwLmpzJztcbmltcG9ydCBhcHAgZnJvbSAnLi4vLi4vc3JjL2luZGV4LmpzJztcbmltcG9ydCBBbmFseXRpY3NFdmVudCBmcm9tICcuLi8uLi9zcmMvbW9kZWxzL0FuYWx5dGljc0V2ZW50LmpzJztcblxuZGVzY3JpYmUoJ0FQSSBFbmRwb2ludCBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBzZXR1cFRlc3REQigpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGVhcmRvd25UZXN0REIoKTtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgQW5hbHl0aWNzRXZlbnQuZGVsZXRlTWFueSh7fSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdIZWFsdGggQ2hlY2sgRW5kcG9pbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBzZXJ2aWNlIGhlYWx0aCBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvaGVhbHRoJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN0YXR1czogJ1VQJyxcbiAgICAgICAgc2VydmljZTogJ2FuYWx5dGljcy1zZXJ2aWNlJyxcbiAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3BlbmRpbmcgQW5hbHl0aWNzIEVuZHBvaW50cycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0gZ2VuZXJhdGVUZXN0RXhwZW5zZXMoMTAwKTtcbiAgICAgIGF3YWl0IEFuYWx5dGljc0V2ZW50Lmluc2VydE1hbnkodGVzdERhdGEpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBzcGVuZGluZyBwYXR0ZXJucyB3aXRoIHZhbGlkIHVzZXIgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9zcGVuZGluZycpXG4gICAgICAgIC5zZXQoJ3VzZXItaWQnLCB1c2VySWQpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCd0aW1lZnJhbWUnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgndG90YWxTcGVuZGluZycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdjYXRlZ29yeUJyZWFrZG93bicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuY2F0ZWdvcnlCcmVha2Rvd24pLnRvQmVJbnN0YW5jZU9mKEFycmF5KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyB1c2VyIElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9zcGVuZGluZycpXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdlcnJvcicsICdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGRhdGUgcmFuZ2UgZmlsdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJJZCA9ICd0ZXN0LXVzZXItMSc7XG4gICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoJzIwMjQtMDEtMzEnKS50b0lTT1N0cmluZygpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYW5hbHl0aWNzL3NwZW5kaW5nJylcbiAgICAgICAgLnNldCgndXNlci1pZCcsIHVzZXJJZClcbiAgICAgICAgLnF1ZXJ5KHsgc3RhcnREYXRlLCBlbmREYXRlIH0pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudGltZWZyYW1lLnN0YXJ0RGF0ZSkudG9CZShzdGFydERhdGUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudGltZWZyYW1lLmVuZERhdGUpLnRvQmUoZW5kRGF0ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnNpZ2h0cyBFbmRwb2ludHMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IGdlbmVyYXRlVGVzdEV4cGVuc2VzKDIwMCk7XG4gICAgICBhd2FpdCBBbmFseXRpY3NFdmVudC5pbnNlcnRNYW55KHRlc3REYXRhKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBnZW5lcmF0ZSBmaW5hbmNpYWwgaW5zaWdodHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9pbnNpZ2h0cycpXG4gICAgICAgIC5zZXQoJ3VzZXItaWQnLCB1c2VySWQpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdpbnNpZ2h0cycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuaW5zaWdodHMpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lmluc2lnaHRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAvLyBWZXJpZnkgaW5zaWdodCBzdHJ1Y3R1cmVcbiAgICAgIGNvbnN0IGluc2lnaHQgPSByZXNwb25zZS5ib2R5Lmluc2lnaHRzWzBdO1xuICAgICAgZXhwZWN0KGluc2lnaHQpLnRvSGF2ZVByb3BlcnR5KCd0eXBlJyk7XG4gICAgICBleHBlY3QoaW5zaWdodCkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcbiAgICAgIGV4cGVjdChpbnNpZ2h0KS50b0hhdmVQcm9wZXJ0eSgnc2V2ZXJpdHknKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gc2F2aW5ncyByZWNvbW1lbmRhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9pbnNpZ2h0cy9yZWNvbW1lbmRhdGlvbnMnKVxuICAgICAgICAuc2V0KCd1c2VyLWlkJywgdXNlcklkKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgncmVjb21tZW5kYXRpb25zJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5yZWNvbW1lbmRhdGlvbnMpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTtcblxuICAgICAgLy8gVmVyaWZ5IHJlY29tbWVuZGF0aW9uIHN0cnVjdHVyZVxuICAgICAgaWYgKHJlc3BvbnNlLmJvZHkucmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVjb21tZW5kYXRpb24gPSByZXNwb25zZS5ib2R5LnJlY29tbWVuZGF0aW9uc1swXTtcbiAgICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9uKS50b0hhdmVQcm9wZXJ0eSgnY2F0ZWdvcnknKTtcbiAgICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9uKS50b0hhdmVQcm9wZXJ0eSgnbWVzc2FnZScpO1xuICAgICAgICBleHBlY3QocmVjb21tZW5kYXRpb24pLnRvSGF2ZVByb3BlcnR5KCdwcmlvcml0eScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJlZGljdGlvbnMgRW5kcG9pbnRzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdERhdGEgPSBnZW5lcmF0ZVRlc3RFeHBlbnNlcygzMDApO1xuICAgICAgYXdhaXQgQW5hbHl0aWNzRXZlbnQuaW5zZXJ0TWFueSh0ZXN0RGF0YSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgc3BlbmRpbmcgcHJlZGljdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9wcmVkaWN0aW9ucycpXG4gICAgICAgIC5zZXQoJ3VzZXItaWQnLCB1c2VySWQpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdwcmVkaWN0aW9ucycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkucHJlZGljdGlvbnMpLnRvQmVJbnN0YW5jZU9mKEFycmF5KTtcblxuICAgICAgLy8gVmVyaWZ5IHByZWRpY3Rpb24gc3RydWN0dXJlXG4gICAgICBjb25zdCBwcmVkaWN0aW9uID0gcmVzcG9uc2UuYm9keS5wcmVkaWN0aW9uc1swXTtcbiAgICAgIGV4cGVjdChwcmVkaWN0aW9uKS50b0hhdmVQcm9wZXJ0eSgnY2F0ZWdvcnknKTtcbiAgICAgIGV4cGVjdChwcmVkaWN0aW9uKS50b0hhdmVQcm9wZXJ0eSgncHJlZGljdGVkQW1vdW50Jyk7XG4gICAgICBleHBlY3QocHJlZGljdGlvbikudG9IYXZlUHJvcGVydHkoJ2NvbmZpZGVuY2UnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcHJlZGljdGlvbiB0aW1lZnJhbWUgcGFyYW1ldGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gJ3Rlc3QtdXNlci0xJztcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hbmFseXRpY3MvcHJlZGljdGlvbnMnKVxuICAgICAgICAuc2V0KCd1c2VyLWlkJywgdXNlcklkKVxuICAgICAgICAucXVlcnkoeyBtb250aHM6IDMgfSlcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5wcmVkaWN0aW9ucy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICByZXNwb25zZS5ib2R5LnByZWRpY3Rpb25zLmZvckVhY2gocHJlZGljdGlvbiA9PiB7XG4gICAgICAgIGV4cGVjdChwcmVkaWN0aW9uKS50b0hhdmVQcm9wZXJ0eSgnbW9udGgnKTtcbiAgICAgICAgZXhwZWN0KHByZWRpY3Rpb24pLnRvSGF2ZVByb3BlcnR5KCdwcmVkaWN0ZWRBbW91bnQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnVkZ2V0IEFuYWx5c2lzIEVuZHBvaW50cycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0gZ2VuZXJhdGVUZXN0RXhwZW5zZXMoMTUwKTtcbiAgICAgIGF3YWl0IEFuYWx5dGljc0V2ZW50Lmluc2VydE1hbnkodGVzdERhdGEpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBidWRnZXQgYW5hbHlzaXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9idWRnZXRzJylcbiAgICAgICAgLnNldCgndXNlci1pZCcsIHVzZXJJZClcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2J1ZGdldEFuYWx5c2lzJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5idWRnZXRBbmFseXNpcykudG9IYXZlUHJvcGVydHkoJ292ZXJ2aWV3Jyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5idWRnZXRBbmFseXNpcykudG9IYXZlUHJvcGVydHkoJ2NhdGVnb3J5QnJlYWtkb3duJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGJ1ZGdldCBjb21wYXJpc29uIHBlcmlvZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9idWRnZXRzL2NvbXBhcmlzb24nKVxuICAgICAgICAuc2V0KCd1c2VyLWlkJywgdXNlcklkKVxuICAgICAgICAucXVlcnkoeyBwZXJpb2Q6ICdtb250aCcgfSlcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2N1cnJlbnRQZXJpb2QnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgncHJldmlvdXNQZXJpb2QnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgndmFyaWFuY2UnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBkYXRlIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSAndGVzdC11c2VyLTEnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FuYWx5dGljcy9zcGVuZGluZycpXG4gICAgICAgIC5zZXQoJ3VzZXItaWQnLCB1c2VySWQpXG4gICAgICAgIC5xdWVyeSh7IHN0YXJ0RGF0ZTogJ2ludmFsaWQtZGF0ZScgfSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2Vycm9yJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgY2F0ZWdvcnkgZmlsdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJJZCA9ICd0ZXN0LXVzZXItMSc7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYW5hbHl0aWNzL3NwZW5kaW5nJylcbiAgICAgICAgLnNldCgndXNlci1pZCcsIHVzZXJJZClcbiAgICAgICAgLnF1ZXJ5KHsgY2F0ZWdvcnk6ICdpbnZhbGlkLWNhdGVnb3J5JyB9KVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFJlcXVpcmVtZW50cycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcmVzcG9uZCB3aXRoaW4gcGVyZm9ybWFuY2UgdGhyZXNob2xkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gJ3Rlc3QtdXNlci0xJztcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYW5hbHl0aWNzL2luc2lnaHRzJylcbiAgICAgICAgLnNldCgndXNlci1pZCcsIHVzZXJJZClcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKHBlcmZvcm1hbmNlVGhyZXNob2xkcy5yZXNwb25zZVRpbWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHJlcXVlc3RzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gJ3Rlc3QtdXNlci0xJztcbiAgICAgIGNvbnN0IGNvbmN1cnJlbnRSZXF1ZXN0cyA9IDEwO1xuXG4gICAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5KGNvbmN1cnJlbnRSZXF1ZXN0cykuZmlsbCgpLm1hcCgoKSA9PlxuICAgICAgICByZXF1ZXN0KGFwcClcbiAgICAgICAgICAuZ2V0KCcvYW5hbHl0aWNzL3NwZW5kaW5nJylcbiAgICAgICAgICAuc2V0KCd1c2VyLWlkJywgdXNlcklkKVxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlcXVlc3RzKTtcbiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgIGV4cGVjdCh0b3RhbFRpbWUpLnRvQmVMZXNzVGhhbihwZXJmb3JtYW5jZVRocmVzaG9sZHMucmVzcG9uc2VUaW1lICogY29uY3VycmVudFJlcXVlc3RzKTtcbiAgICB9KTtcbiAgfSk7XG59KTsgIl0sIm1hcHBpbmdzIjoicWxCQUFBLElBQUFBLFVBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTs7Ozs7O0FBTUEsSUFBQUUsTUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsZUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBOztBQUVBSSxRQUFRLENBQUMsb0JBQW9CLEVBQUUsTUFBTTtFQUNuQ0MsU0FBUyxDQUFDLFlBQVk7SUFDcEIsTUFBTSxJQUFBQyxrQkFBVyxFQUFDLENBQUM7RUFDckIsQ0FBQyxDQUFDOztFQUVGQyxRQUFRLENBQUMsWUFBWTtJQUNuQixNQUFNLElBQUFDLHFCQUFjLEVBQUMsQ0FBQztFQUN4QixDQUFDLENBQUM7O0VBRUZDLFVBQVUsQ0FBQyxZQUFZO0lBQ3JCLE1BQU1DLHVCQUFjLENBQUNDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNyQyxDQUFDLENBQUM7O0VBRUZQLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxNQUFNO0lBQ3RDUSxJQUFJLENBQUMscUNBQXFDLEVBQUUsWUFBWTtNQUN0RCxNQUFNQyxRQUFRLEdBQUcsTUFBTSxJQUFBQyxrQkFBTyxFQUFDQyxjQUFHLENBQUM7TUFDaENDLEdBQUcsQ0FBQyxTQUFTLENBQUM7TUFDZEMsTUFBTSxDQUFDLEdBQUcsQ0FBQzs7TUFFZEEsTUFBTSxD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