"use strict";var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _isArray = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/array/is-array"));var _some = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/some"));var _map = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map"));var _fill = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/fill"));var _supertest = _interopRequireDefault(require("supertest"));
var _mongoose = _interopRequireDefault(require("mongoose"));
var _index = _interopRequireDefault(require("../src/index.js"));
var _AnalyticsEvent = _interopRequireDefault(require("../src/models/AnalyticsEvent.js"));

describe('Insights Endpoints', () => {
  beforeEach(async () => {
    await _AnalyticsEvent.default.deleteMany({});
  });

  describe('GET /insights', () => {
    it('should return 401 without user ID', async () => {
      const response = await (0, _supertest.default)(_index.default).
      get('/insights').
      expect(401);

      expect(response.body.error).toBe('User ID is required');
    });

    it('should generate insights from spending patterns', async () => {
      const userId = new _mongoose.default.Types.ObjectId();
      const transactions = [
      { amount: 100, category: 'groceries', timestamp: new Date() },
      { amount: 150, category: 'groceries', timestamp: new Date() },
      { amount: 200, category: 'groceries', timestamp: new Date() }];


      for (const t of transactions) {
        await new _AnalyticsEvent.default({
          userId,
          eventType: 'EXPENSE_CREATED',
          ...t
        }).save();
      }

      const response = await (0, _supertest.default)(_index.default).
      get('/insights').
      query({ userId: userId.toString() }).
      expect(200);

      expect(response.body).toHaveProperty('insights');
      expect((0, _isArray.default)(response.body.insights)).toBe(true);
    });

    it('should identify significant spending changes', async () => {var _context;
      const userId = new _mongoose.default.Types.ObjectId();
      const transactions = [
      { amount: 100, category: 'groceries', timestamp: new Date() },
      { amount: 300, category: 'groceries', timestamp: new Date() }];


      for (const t of transactions) {
        await new _AnalyticsEvent.default({
          userId,
          eventType: 'EXPENSE_CREATED',
          ...t
        }).save();
      }

      const response = await (0, _supertest.default)(_index.default).
      get('/insights').
      query({ userId: userId.toString() }).
      expect(200);

      expect((0, _some.default)(_context = response.body.insights).call(_context, (insight) =>
      insight.type === 'SPENDING_CHANGE'
      )).toBe(true);
    });

    it('should handle empty data gracefully', async () => {
      const userId = new _mongoose.default.Types.ObjectId();
      const response = await (0, _supertest.default)(_index.default).
      get('/insights').
      query({ userId: userId.toString() }).
      expect(200);

      expect(response.body.insights).toEqual([]);
    });
  });

  describe('GET /insights/recommendations', () => {
    it('should return spending recommendations', async () => {
      const userId = new _mongoose.default.Types.ObjectId();
      const transactions = [
      { amount: 100, category: 'groceries', timestamp: new Date() },
      { amount: 150, category: 'groceries', timestamp: new Date() }];


      for (const t of transactions) {
        await new _AnalyticsEvent.default({
          userId,
          eventType: 'EXPENSE_CREATED',
          ...t
        }).save();
      }

      const response = await (0, _supertest.default)(_index.default).
      get('/insights/recommendations').
      query({ userId: userId.toString() }).
      expect(200);

      expect(response.body).toHaveProperty('recommendations');
      expect((0, _isArray.default)(response.body.recommendations)).toBe(true);
    });

    it('should identify high-frequency spending categories', async () => {var _context2, _context3, _context4;
      const userId = new _mongoose.default.Types.ObjectId();
      const transactions = (0, _map.default)(_context2 = (0, _fill.default)(_context3 = Array(5)).call(_context3, null)).call(_context2, () => ({
        amount: 50,
        category: 'groceries',
        timestamp: new Date()
      }));

      for (const t of transactions) {
        await new _AnalyticsEvent.default({
          userId,
          eventType: 'EXPENSE_CREATED',
          ...t
        }).save();
      }

      const response = await (0, _supertest.default)(_index.default).
      get('/insights/recommendations').
      query({ userId: userId.toString() }).
      expect(200);

      expect((0, _some.default)(_context4 = response.body.recommendations).call(_context4, (rec) =>
      rec.type === 'HIGH_FREQUENCY'
      )).toBe(true);
    });

    it('should identify irregular large expenses', async () => {var _context5;
      const userId = new _mongoose.default.Types.ObjectId();
      const transactions = [
      { amount: 100, category: 'groceries', timestamp: new Date() },
      { amount: 1000, category: 'groceries', timestamp: new Date() }];


      for (const t of transactions) {
        await new _AnalyticsEvent.default({
          userId,
          eventType: 'EXPENSE_CREATED',
          ...t
        }).save();
      }

      const response = await (0, _supertest.default)(_index.default).
      get('/insights/recommendations').
      query({ userId: userId.toString() }).
      expect(200);

      expect((0, _some.default)(_context5 = response.body.recommendations).call(_context5, (rec) =>
      rec.type === 'LARGE_EXPENSE'
      )).toBe(true);
    });
  });

  describe('Data Analysis Quality', () => {
    it('should provide meaningful insights for varied spending patterns', async () => {var _context6;
      const userId = new _mongoose.default.Types.ObjectId();
      const transactions = [
      { amount: 100, category: 'groceries', timestamp: new Date() },
      { amount: 200, category: 'groceries', timestamp: new Date() },
      { amount: 300, category: 'groceries', timestamp: new Date() },
      { amount: 50, category: 'groceries', timestamp: new Date() }];


      for (const t of transactions) {
        await new _AnalyticsEvent.default({
          userId,
          eventType: 'EXPENSE_CREATED',
          ...t
        }).save();
      }

      const response = await (0, _supertest.default)(_index.default).
      get('/insights').
      query({ userId: userId.toString() }).
      expect(200);

      expect(response.body.insights.length).toBeGreaterThan(0);
      expect((0, _some.default)(_context6 = response.body.insights).call(_context6, (insight) =>
      insight.type === 'TREND'
      )).toBe(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3VwZXJ0ZXN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9uZ29vc2UiLCJfaW5kZXgiLCJfQW5hbHl0aWNzRXZlbnQiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJBbmFseXRpY3NFdmVudCIsImRlbGV0ZU1hbnkiLCJpdCIsInJlc3BvbnNlIiwicmVxdWVzdCIsImFwcCIsImdldCIsImV4cGVjdCIsImJvZHkiLCJlcnJvciIsInRvQmUiLCJ1c2VySWQiLCJtb25nb29zZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJ0cmFuc2FjdGlvbnMiLCJhbW91bnQiLCJjYXRlZ29yeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0IiwiZXZlbnRUeXBlIiwic2F2ZSIsInF1ZXJ5IiwidG9TdHJpbmciLCJ0b0hhdmVQcm9wZXJ0eSIsIl9pc0FycmF5IiwiZGVmYXVsdCIsImluc2lnaHRzIiwiX2NvbnRleHQiLCJfc29tZSIsImNhbGwiLCJpbnNpZ2h0IiwidHlwZSIsInRvRXF1YWwiLCJyZWNvbW1lbmRhdGlvbnMiLCJfY29udGV4dDIiLCJfY29udGV4dDMiLCJfY29udGV4dDQiLCJfbWFwIiwiX2ZpbGwiLCJBcnJheSIsInJlYyIsIl9jb250ZXh0NSIsIl9jb250ZXh0NiIsImxlbmd0aCIsInRvQmVHcmVhdGVyVGhhbiJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9hbmFseXRpY3Mtc2VydmljZS9fX3Rlc3RzX18vaW5zaWdodHMudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVxdWVzdCBmcm9tICdzdXBlcnRlc3QnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBhcHAgZnJvbSAnLi4vc3JjL2luZGV4LmpzJztcbmltcG9ydCBBbmFseXRpY3NFdmVudCBmcm9tICcuLi9zcmMvbW9kZWxzL0FuYWx5dGljc0V2ZW50LmpzJztcblxuZGVzY3JpYmUoJ0luc2lnaHRzIEVuZHBvaW50cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgQW5hbHl0aWNzRXZlbnQuZGVsZXRlTWFueSh7fSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2luc2lnaHRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwMSB3aXRob3V0IHVzZXIgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvaW5zaWdodHMnKVxuICAgICAgICAuZXhwZWN0KDQwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIGluc2lnaHRzIGZyb20gc3BlbmRpbmcgcGF0dGVybnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoKTtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IFtcbiAgICAgICAgeyBhbW91bnQ6IDEwMCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgeyBhbW91bnQ6IDE1MCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgeyBhbW91bnQ6IDIwMCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB0IG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICBhd2FpdCBuZXcgQW5hbHl0aWNzRXZlbnQoe1xuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBldmVudFR5cGU6ICdFWFBFTlNFX0NSRUFURUQnLFxuICAgICAgICAgIC4uLnRcbiAgICAgICAgfSkuc2F2ZSgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvaW5zaWdodHMnKVxuICAgICAgICAucXVlcnkoeyB1c2VySWQ6IHVzZXJJZC50b1N0cmluZygpIH0pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdpbnNpZ2h0cycpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2UuYm9keS5pbnNpZ2h0cykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IHNpZ25pZmljYW50IHNwZW5kaW5nIGNoYW5nZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoKTtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IFtcbiAgICAgICAgeyBhbW91bnQ6IDEwMCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgeyBhbW91bnQ6IDMwMCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB0IG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICBhd2FpdCBuZXcgQW5hbHl0aWNzRXZlbnQoe1xuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBldmVudFR5cGU6ICdFWFBFTlNFX0NSRUFURUQnLFxuICAgICAgICAgIC4uLnRcbiAgICAgICAgfSkuc2F2ZSgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvaW5zaWdodHMnKVxuICAgICAgICAucXVlcnkoeyB1c2VySWQ6IHVzZXJJZC50b1N0cmluZygpIH0pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuaW5zaWdodHMuc29tZShpbnNpZ2h0ID0+IFxuICAgICAgICBpbnNpZ2h0LnR5cGUgPT09ICdTUEVORElOR19DSEFOR0UnXG4gICAgICApKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgZGF0YSBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gbmV3IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkKCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvaW5zaWdodHMnKVxuICAgICAgICAucXVlcnkoeyB1c2VySWQ6IHVzZXJJZC50b1N0cmluZygpIH0pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuaW5zaWdodHMpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9pbnNpZ2h0cy9yZWNvbW1lbmRhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc3BlbmRpbmcgcmVjb21tZW5kYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gbmV3IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkKCk7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBbXG4gICAgICAgIHsgYW1vdW50OiAxMDAsIGNhdGVnb3J5OiAnZ3JvY2VyaWVzJywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpIH0sXG4gICAgICAgIHsgYW1vdW50OiAxNTAsIGNhdGVnb3J5OiAnZ3JvY2VyaWVzJywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpIH1cbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgdCBvZiB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgbmV3IEFuYWx5dGljc0V2ZW50KHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgZXZlbnRUeXBlOiAnRVhQRU5TRV9DUkVBVEVEJyxcbiAgICAgICAgICAuLi50XG4gICAgICAgIH0pLnNhdmUoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2luc2lnaHRzL3JlY29tbWVuZGF0aW9ucycpXG4gICAgICAgIC5xdWVyeSh7IHVzZXJJZDogdXNlcklkLnRvU3RyaW5nKCkgfSlcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3JlY29tbWVuZGF0aW9ucycpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2UuYm9keS5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpZGVudGlmeSBoaWdoLWZyZXF1ZW5jeSBzcGVuZGluZyBjYXRlZ29yaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gbmV3IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkKCk7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBBcnJheSg1KS5maWxsKG51bGwpLm1hcCgoKSA9PiAoe1xuICAgICAgICBhbW91bnQ6IDUwLFxuICAgICAgICBjYXRlZ29yeTogJ2dyb2NlcmllcycsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgfSkpO1xuXG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIGF3YWl0IG5ldyBBbmFseXRpY3NFdmVudCh7XG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIGV2ZW50VHlwZTogJ0VYUEVOU0VfQ1JFQVRFRCcsXG4gICAgICAgICAgLi4udFxuICAgICAgICB9KS5zYXZlKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9pbnNpZ2h0cy9yZWNvbW1lbmRhdGlvbnMnKVxuICAgICAgICAucXVlcnkoeyB1c2VySWQ6IHVzZXJJZC50b1N0cmluZygpIH0pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkucmVjb21tZW5kYXRpb25zLnNvbWUocmVjID0+IFxuICAgICAgICByZWMudHlwZSA9PT0gJ0hJR0hfRlJFUVVFTkNZJ1xuICAgICAgKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaWRlbnRpZnkgaXJyZWd1bGFyIGxhcmdlIGV4cGVuc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlcklkID0gbmV3IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkKCk7XG4gICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBbXG4gICAgICAgIHsgYW1vdW50OiAxMDAsIGNhdGVnb3J5OiAnZ3JvY2VyaWVzJywgdGltZXN0YW1wOiBuZXcgRGF0ZSgpIH0sXG4gICAgICAgIHsgYW1vdW50OiAxMDAwLCBjYXRlZ29yeTogJ2dyb2NlcmllcycsIHRpbWVzdGFtcDogbmV3IERhdGUoKSB9XG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIGF3YWl0IG5ldyBBbmFseXRpY3NFdmVudCh7XG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIGV2ZW50VHlwZTogJ0VYUEVOU0VfQ1JFQVRFRCcsXG4gICAgICAgICAgLi4udFxuICAgICAgICB9KS5zYXZlKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9pbnNpZ2h0cy9yZWNvbW1lbmRhdGlvbnMnKVxuICAgICAgICAucXVlcnkoeyB1c2VySWQ6IHVzZXJJZC50b1N0cmluZygpIH0pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkucmVjb21tZW5kYXRpb25zLnNvbWUocmVjID0+IFxuICAgICAgICByZWMudHlwZSA9PT0gJ0xBUkdFX0VYUEVOU0UnXG4gICAgICApKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGF0YSBBbmFseXNpcyBRdWFsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBtZWFuaW5nZnVsIGluc2lnaHRzIGZvciB2YXJpZWQgc3BlbmRpbmcgcGF0dGVybnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySWQgPSBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoKTtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IFtcbiAgICAgICAgeyBhbW91bnQ6IDEwMCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgeyBhbW91bnQ6IDIwMCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgeyBhbW91bnQ6IDMwMCwgY2F0ZWdvcnk6ICdncm9jZXJpZXMnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgeyBhbW91bnQ6IDUwLCBjYXRlZ29yeTogJ2dyb2NlcmllcycsIHRpbWVzdGFtcDogbmV3IERhdGUoKSB9XG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIGF3YWl0IG5ldyBBbmFseXRpY3NFdmVudCh7XG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIGV2ZW50VHlwZTogJ0VYUEVOU0VfQ1JFQVRFRCcsXG4gICAgICAgICAgLi4udFxuICAgICAgICB9KS5zYXZlKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9pbnNpZ2h0cycpXG4gICAgICAgIC5xdWVyeSh7IHVzZXJJZDogdXNlcklkLnRvU3RyaW5nKCkgfSlcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5pbnNpZ2h0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lmluc2lnaHRzLnNvbWUoaW5zaWdodCA9PiBcbiAgICAgICAgaW5zaWdodC50eXBlID09PSAnVFJFTkQnXG4gICAgICApKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyAiXSwibWFwcGluZ3MiOiJ3ZkFBQSxJQUFBQSxVQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxNQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxlQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7O0FBRUFJLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxNQUFNO0VBQ25DQyxVQUFVLENBQUMsWUFBWTtJQUNyQixNQUFNQyx1QkFBYyxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckMsQ0FBQyxDQUFDOztFQUVGSCxRQUFRLENBQUMsZUFBZSxFQUFFLE1BQU07SUFDOUJJLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxZQUFZO01BQ2xELE1BQU1DLFFBQVEsR0FBRyxNQUFNLElBQUFDLGtCQUFPLEVBQUNDLGNBQUcsQ0FBQztNQUNoQ0MsR0FBRyxDQUFDLFdBQVcsQ0FBQztNQUNoQkMsTUFBTSxDQUFDLEdBQUcsQ0FBQzs7TUFFZEEsTUFBTSxDQUFDSixRQUFRLENBQUNLLElBQUksQ0FBQ0MsS0FBSyxDQUFDLENBQUNDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQztJQUN6RCxDQUFDLENBQUM7O0lBRUZSLEVBQUUsQ0FBQyxpREFBaUQsRUFBRSxZQUFZO01B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