"use strict";var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _from = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/array/from"));var _map = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map"));var _stringify = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/json/stringify"));var _filter = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/filter"));var _includes = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/includes"));var _globals = require("@jest/globals");
var _dataProcessor = require("../../src/utils/dataProcessor.js");




var _cache = require("../../src/utils/cache.js");
var _metrics = require("../../src/utils/metrics.js");

// Mock dependencies
_globals.jest.mock('../../src/utils/cache.js');
_globals.jest.mock('../../src/utils/metrics.js');

describe('Data Processor Utilities', () => {
  beforeEach(() => {
    _globals.jest.clearAllMocks();
  });

  describe('processInChunks', () => {
    it('should process data in chunks with progress tracking', async () => {
      const testData = (0, _from.default)({ length: 2500 }, (_, i) => ({ id: i }));
      const mockProcessor = _globals.jest.fn((chunk) => (0, _map.default)(chunk).call(chunk, (item) => ({ ...item, processed: true })));
      const mockProgressCallback = _globals.jest.fn();

      const results = await (0, _dataProcessor.processInChunks)(testData, mockProcessor, {
        chunkSize: 1000,
        maxConcurrent: 2,
        progressCallback: mockProgressCallback
      });

      expect(results).toHaveLength(2500);
      expect(mockProcessor).toHaveBeenCalledTimes(3); // 2500/1000 = 3 chunks
      expect(mockProgressCallback).toHaveBeenCalledTimes(3);
      expect(_metrics.recordDataProcessingMetrics).toHaveBeenCalledTimes(2); // 2 batch operations

      // Verify progress reporting
      const lastProgress = mockProgressCallback.mock.calls[2][0];
      expect(lastProgress).toEqual({
        processed: 2500,
        total: 2500,
        percent: 100
      });
    });

    it('should handle processor errors', async () => {
      const testData = (0, _from.default)({ length: 100 }, (_, i) => ({ id: i }));
      const mockProcessor = _globals.jest.fn().mockRejectedValue(new Error('Processing error'));

      await expect((0, _dataProcessor.processInChunks)(testData, mockProcessor)).rejects.toThrow('Processing error');
    });
  });

  describe('aggregateWithCache', () => {
    it('should return cached result when available', async () => {
      const cachedResult = { data: 'cached' };
      _cache.redisClient.get.mockResolvedValue((0, _stringify.default)(cachedResult));

      const result = await (0, _dataProcessor.aggregateWithCache)(
        'test:key',
        async () => ({ data: 'fresh' })
      );

      expect(result).toEqual(cachedResult);
      expect(_cache.redisClient.get).toHaveBeenCalledWith('test:key');
      expect(_metrics.measureOperation).not.toHaveBeenCalled();
    });

    it('should execute and cache aggregation when no cache exists', async () => {
      const freshResult = { data: 'fresh' };
      _cache.redisClient.get.mockResolvedValue(null);
      _metrics.measureOperation.mockImplementation((_, fn) => fn());

      const mockAggregator = _globals.jest.fn().mockResolvedValue(freshResult);
      const result = await (0, _dataProcessor.aggregateWithCache)('test:key', mockAggregator);

      expect(result).toEqual(freshResult);
      expect(_cache.redisClient.get).toHaveBeenCalledWith('test:key');
      expect(_cache.redisClient.setex).toHaveBeenCalledWith(
        'test:key',
        3600,
        (0, _stringify.default)(freshResult)
      );
      expect(mockAggregator).toHaveBeenCalled();
    });

    it('should force fresh aggregation when specified', async () => {
      const freshResult = { data: 'fresh' };
      _metrics.measureOperation.mockImplementation((_, fn) => fn());

      const mockAggregator = _globals.jest.fn().mockResolvedValue(freshResult);
      const result = await (0, _dataProcessor.aggregateWithCache)(
        'test:key',
        mockAggregator,
        { forceFresh: true }
      );

      expect(result).toEqual(freshResult);
      expect(_cache.redisClient.get).not.toHaveBeenCalled();
      expect(mockAggregator).toHaveBeenCalled();
    });

    it('should handle cache errors gracefully', async () => {
      const freshResult = { data: 'fresh' };
      _cache.redisClient.get.mockRejectedValue(new Error('Redis error'));
      _metrics.measureOperation.mockImplementation((_, fn) => fn());

      const mockAggregator = _globals.jest.fn().mockResolvedValue(freshResult);
      const result = await (0, _dataProcessor.aggregateWithCache)('test:key', mockAggregator);

      expect(result).toEqual(freshResult);
      expect(mockAggregator).toHaveBeenCalled();
    });
  });

  describe('processTimeSeriesData', () => {
    const testData = [
    { timestamp: '2024-03-01T00:00:00Z', value: 10, type: 'A' },
    { timestamp: '2024-03-01T01:00:00Z', value: 20, type: 'A' },
    { timestamp: '2024-03-01T00:00:00Z', value: 15, type: 'B' },
    { timestamp: '2024-03-01T01:00:00Z', value: 25, type: 'B' }];


    it('should process time series data with default options', async () => {
      _cache.redisClient.get.mockResolvedValue(null);
      _metrics.measureOperation.mockImplementation((_, fn) => fn());

      const result = await (0, _dataProcessor.processTimeSeriesData)(testData);

      expect(result).toHaveLength(2); // 2 unique time periods
      expect(result[0].value).toBe(25); // Sum of values for first time period
      expect(result[1].value).toBe(45); // Sum of values for second time period
    });

    it('should process time series data with custom dimensions', async () => {
      _cache.redisClient.get.mockResolvedValue(null);
      _metrics.measureOperation.mockImplementation((_, fn) => fn());

      const result = await (0, _dataProcessor.processTimeSeriesData)(testData, {
        interval: '1h',
        aggregationType: 'sum',
        dimensions: ['type']
      });

      expect(result).toHaveLength(4); // 2 time periods * 2 types
      const typeAData = (0, _filter.default)(result).call(result, (r) => {var _context;return (0, _includes.default)(_context = r.dimensions).call(_context, 'A');});
      expect(typeAData).toHaveLength(2);
      expect(typeAData[0].value).toBe(10);
      expect(typeAData[1].value).toBe(20);
    });

    it('should handle different aggregation types', async () => {
      _cache.redisClient.get.mockResolvedValue(null);
      _metrics.measureOperation.mockImplementation((_, fn) => fn());

      const avgResult = await (0, _dataProcessor.processTimeSeriesData)(testData, {
        interval: '1h',
        aggregationType: 'avg'
      });

      expect(avgResult).toHaveLength(2);
      expect(avgResult[0].value).toBe(12.5); // Average of first time period
      expect(avgResult[1].value).toBe(22.5); // Average of second time period
    });

    it('should use cached results when available', async () => {
      const cachedResult = [
      { timestamp: '2024-03-01T00:00:00Z', value: 100 }];

      _cache.redisClient.get.mockResolvedValue((0, _stringify.default)(cachedResult));

      const result = await (0, _dataProcessor.processTimeSeriesData)(testData);

      expect(result).toEqual(cachedResult);
      expect(_metrics.measureOperation).not.toHaveBeenCalled();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfZGF0YVByb2Nlc3NvciIsIl9jYWNoZSIsIl9tZXRyaWNzIiwiamVzdCIsIm1vY2siLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJ0ZXN0RGF0YSIsIl9mcm9tIiwiZGVmYXVsdCIsImxlbmd0aCIsIl8iLCJpIiwiaWQiLCJtb2NrUHJvY2Vzc29yIiwiZm4iLCJjaHVuayIsIl9tYXAiLCJjYWxsIiwiaXRlbSIsInByb2Nlc3NlZCIsIm1vY2tQcm9ncmVzc0NhbGxiYWNrIiwicmVzdWx0cyIsInByb2Nlc3NJbkNodW5rcyIsImNodW5rU2l6ZSIsIm1heENvbmN1cnJlbnQiLCJwcm9ncmVzc0NhbGxiYWNrIiwiZXhwZWN0IiwidG9IYXZlTGVuZ3RoIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwicmVjb3JkRGF0YVByb2Nlc3NpbmdNZXRyaWNzIiwibGFzdFByb2dyZXNzIiwiY2FsbHMiLCJ0b0VxdWFsIiwidG90YWwiLCJwZXJjZW50IiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsInJlamVjdHMiLCJ0b1Rocm93IiwiY2FjaGVkUmVzdWx0IiwiZGF0YSIsInJlZGlzQ2xpZW50IiwiZ2V0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJfc3RyaW5naWZ5IiwicmVzdWx0IiwiYWdncmVnYXRlV2l0aENhY2hlIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtZWFzdXJlT3BlcmF0aW9uIiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsImZyZXNoUmVzdWx0IiwibW9ja0ltcGxlbWVudGF0aW9uIiwibW9ja0FnZ3JlZ2F0b3IiLCJzZXRleCIsImZvcmNlRnJlc2giLCJ0aW1lc3RhbXAiLCJ2YWx1ZSIsInR5cGUiLCJwcm9jZXNzVGltZVNlcmllc0RhdGEiLCJ0b0JlIiwiaW50ZXJ2YWwiLCJhZ2dyZWdhdGlvblR5cGUiLCJkaW1lbnNpb25zIiwidHlwZUFEYXRhIiwiX2ZpbHRlciIsInIiLCJfY29udGV4dCIsIl9pbmNsdWRlcyIsImF2Z1Jlc3VsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9hbmFseXRpY3Mtc2VydmljZS9fX3Rlc3RzX18vdW5pdC9kYXRhUHJvY2Vzc29yLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHtcbiAgcHJvY2Vzc0luQ2h1bmtzLFxuICBhZ2dyZWdhdGVXaXRoQ2FjaGUsXG4gIHByb2Nlc3NUaW1lU2VyaWVzRGF0YVxufSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvZGF0YVByb2Nlc3Nvci5qcyc7XG5pbXBvcnQgeyByZWRpc0NsaWVudCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9jYWNoZS5qcyc7XG5pbXBvcnQgeyBtZWFzdXJlT3BlcmF0aW9uLCByZWNvcmREYXRhUHJvY2Vzc2luZ01ldHJpY3MgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvbWV0cmljcy5qcyc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy91dGlscy9jYWNoZS5qcycpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvdXRpbHMvbWV0cmljcy5qcycpO1xuXG5kZXNjcmliZSgnRGF0YSBQcm9jZXNzb3IgVXRpbGl0aWVzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Byb2Nlc3NJbkNodW5rcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgZGF0YSBpbiBjaHVua3Mgd2l0aCBwcm9ncmVzcyB0cmFja2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjUwMCB9LCAoXywgaSkgPT4gKHsgaWQ6IGkgfSkpO1xuICAgICAgY29uc3QgbW9ja1Byb2Nlc3NvciA9IGplc3QuZm4oY2h1bmsgPT4gY2h1bmsubWFwKGl0ZW0gPT4gKHsgLi4uaXRlbSwgcHJvY2Vzc2VkOiB0cnVlIH0pKSk7XG4gICAgICBjb25zdCBtb2NrUHJvZ3Jlc3NDYWxsYmFjayA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHByb2Nlc3NJbkNodW5rcyh0ZXN0RGF0YSwgbW9ja1Byb2Nlc3Nvciwge1xuICAgICAgICBjaHVua1NpemU6IDEwMDAsXG4gICAgICAgIG1heENvbmN1cnJlbnQ6IDIsXG4gICAgICAgIHByb2dyZXNzQ2FsbGJhY2s6IG1vY2tQcm9ncmVzc0NhbGxiYWNrXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgyNTAwKTtcbiAgICAgIGV4cGVjdChtb2NrUHJvY2Vzc29yKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7IC8vIDI1MDAvMTAwMCA9IDMgY2h1bmtzXG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTtcbiAgICAgIGV4cGVjdChyZWNvcmREYXRhUHJvY2Vzc2luZ01ldHJpY3MpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTsgLy8gMiBiYXRjaCBvcGVyYXRpb25zXG5cbiAgICAgIC8vIFZlcmlmeSBwcm9ncmVzcyByZXBvcnRpbmdcbiAgICAgIGNvbnN0IGxhc3RQcm9ncmVzcyA9IG1vY2tQcm9ncmVzc0NhbGxiYWNrLm1vY2suY2FsbHNbMl1bMF07XG4gICAgICBleHBlY3QobGFzdFByb2dyZXNzKS50b0VxdWFsKHtcbiAgICAgICAgcHJvY2Vzc2VkOiAyNTAwLFxuICAgICAgICB0b3RhbDogMjUwMCxcbiAgICAgICAgcGVyY2VudDogMTAwXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHByb2Nlc3NvciBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoXywgaSkgPT4gKHsgaWQ6IGkgfSkpO1xuICAgICAgY29uc3QgbW9ja1Byb2Nlc3NvciA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1Byb2Nlc3NpbmcgZXJyb3InKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChwcm9jZXNzSW5DaHVua3ModGVzdERhdGEsIG1vY2tQcm9jZXNzb3IpKS5yZWplY3RzLnRvVGhyb3coJ1Byb2Nlc3NpbmcgZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FnZ3JlZ2F0ZVdpdGhDYWNoZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjYWNoZWQgcmVzdWx0IHdoZW4gYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2FjaGVkUmVzdWx0ID0geyBkYXRhOiAnY2FjaGVkJyB9O1xuICAgICAgcmVkaXNDbGllbnQuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlKEpTT04uc3RyaW5naWZ5KGNhY2hlZFJlc3VsdCkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZ2dyZWdhdGVXaXRoQ2FjaGUoXG4gICAgICAgICd0ZXN0OmtleScsXG4gICAgICAgIGFzeW5jICgpID0+ICh7IGRhdGE6ICdmcmVzaCcgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoY2FjaGVkUmVzdWx0KTtcbiAgICAgIGV4cGVjdChyZWRpc0NsaWVudC5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0OmtleScpO1xuICAgICAgZXhwZWN0KG1lYXN1cmVPcGVyYXRpb24pLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgYW5kIGNhY2hlIGFnZ3JlZ2F0aW9uIHdoZW4gbm8gY2FjaGUgZXhpc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZnJlc2hSZXN1bHQgPSB7IGRhdGE6ICdmcmVzaCcgfTtcbiAgICAgIHJlZGlzQ2xpZW50LmdldC5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIG1lYXN1cmVPcGVyYXRpb24ubW9ja0ltcGxlbWVudGF0aW9uKChfLCBmbikgPT4gZm4oKSk7XG5cbiAgICAgIGNvbnN0IG1vY2tBZ2dyZWdhdG9yID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKGZyZXNoUmVzdWx0KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFnZ3JlZ2F0ZVdpdGhDYWNoZSgndGVzdDprZXknLCBtb2NrQWdncmVnYXRvcik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZnJlc2hSZXN1bHQpO1xuICAgICAgZXhwZWN0KHJlZGlzQ2xpZW50LmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Rlc3Q6a2V5Jyk7XG4gICAgICBleHBlY3QocmVkaXNDbGllbnQuc2V0ZXgpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAndGVzdDprZXknLFxuICAgICAgICAzNjAwLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShmcmVzaFJlc3VsdClcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja0FnZ3JlZ2F0b3IpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZm9yY2UgZnJlc2ggYWdncmVnYXRpb24gd2hlbiBzcGVjaWZpZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmcmVzaFJlc3VsdCA9IHsgZGF0YTogJ2ZyZXNoJyB9O1xuICAgICAgbWVhc3VyZU9wZXJhdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oKF8sIGZuKSA9PiBmbigpKTtcblxuICAgICAgY29uc3QgbW9ja0FnZ3JlZ2F0b3IgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoZnJlc2hSZXN1bHQpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWdncmVnYXRlV2l0aENhY2hlKFxuICAgICAgICAndGVzdDprZXknLFxuICAgICAgICBtb2NrQWdncmVnYXRvcixcbiAgICAgICAgeyBmb3JjZUZyZXNoOiB0cnVlIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZnJlc2hSZXN1bHQpO1xuICAgICAgZXhwZWN0KHJlZGlzQ2xpZW50LmdldCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrQWdncmVnYXRvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FjaGUgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmcmVzaFJlc3VsdCA9IHsgZGF0YTogJ2ZyZXNoJyB9O1xuICAgICAgcmVkaXNDbGllbnQuZ2V0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignUmVkaXMgZXJyb3InKSk7XG4gICAgICBtZWFzdXJlT3BlcmF0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbigoXywgZm4pID0+IGZuKCkpO1xuXG4gICAgICBjb25zdCBtb2NrQWdncmVnYXRvciA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShmcmVzaFJlc3VsdCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZ2dyZWdhdGVXaXRoQ2FjaGUoJ3Rlc3Q6a2V5JywgbW9ja0FnZ3JlZ2F0b3IpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGZyZXNoUmVzdWx0KTtcbiAgICAgIGV4cGVjdChtb2NrQWdncmVnYXRvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncHJvY2Vzc1RpbWVTZXJpZXNEYXRhJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlc3REYXRhID0gW1xuICAgICAgeyB0aW1lc3RhbXA6ICcyMDI0LTAzLTAxVDAwOjAwOjAwWicsIHZhbHVlOiAxMCwgdHlwZTogJ0EnIH0sXG4gICAgICB7IHRpbWVzdGFtcDogJzIwMjQtMDMtMDFUMDE6MDA6MDBaJywgdmFsdWU6IDIwLCB0eXBlOiAnQScgfSxcbiAgICAgIHsgdGltZXN0YW1wOiAnMjAyNC0wMy0wMVQwMDowMDowMFonLCB2YWx1ZTogMTUsIHR5cGU6ICdCJyB9LFxuICAgICAgeyB0aW1lc3RhbXA6ICcyMDI0LTAzLTAxVDAxOjAwOjAwWicsIHZhbHVlOiAyNSwgdHlwZTogJ0InIH1cbiAgICBdO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm9jZXNzIHRpbWUgc2VyaWVzIGRhdGEgd2l0aCBkZWZhdWx0IG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZWRpc0NsaWVudC5nZXQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBtZWFzdXJlT3BlcmF0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbigoXywgZm4pID0+IGZuKCkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9jZXNzVGltZVNlcmllc0RhdGEodGVzdERhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7IC8vIDIgdW5pcXVlIHRpbWUgcGVyaW9kc1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS52YWx1ZSkudG9CZSgyNSk7IC8vIFN1bSBvZiB2YWx1ZXMgZm9yIGZpcnN0IHRpbWUgcGVyaW9kXG4gICAgICBleHBlY3QocmVzdWx0WzFdLnZhbHVlKS50b0JlKDQ1KTsgLy8gU3VtIG9mIHZhbHVlcyBmb3Igc2Vjb25kIHRpbWUgcGVyaW9kXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb2Nlc3MgdGltZSBzZXJpZXMgZGF0YSB3aXRoIGN1c3RvbSBkaW1lbnNpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVkaXNDbGllbnQuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgbWVhc3VyZU9wZXJhdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oKF8sIGZuKSA9PiBmbigpKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvY2Vzc1RpbWVTZXJpZXNEYXRhKHRlc3REYXRhLCB7XG4gICAgICAgIGludGVydmFsOiAnMWgnLFxuICAgICAgICBhZ2dyZWdhdGlvblR5cGU6ICdzdW0nLFxuICAgICAgICBkaW1lbnNpb25zOiBbJ3R5cGUnXVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCg0KTsgLy8gMiB0aW1lIHBlcmlvZHMgKiAyIHR5cGVzXG4gICAgICBjb25zdCB0eXBlQURhdGEgPSByZXN1bHQuZmlsdGVyKHIgPT4gci5kaW1lbnNpb25zLmluY2x1ZGVzKCdBJykpO1xuICAgICAgZXhwZWN0KHR5cGVBRGF0YSkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHR5cGVBRGF0YVswXS52YWx1ZSkudG9CZSgxMCk7XG4gICAgICBleHBlY3QodHlwZUFEYXRhWzFdLnZhbHVlKS50b0JlKDIwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBhZ2dyZWdhdGlvbiB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlZGlzQ2xpZW50LmdldC5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIG1lYXN1cmVPcGVyYXRpb24ubW9ja0ltcGxlbWVudGF0aW9uKChfLCBmbikgPT4gZm4oKSk7XG5cbiAgICAgIGNvbnN0IGF2Z1Jlc3VsdCA9IGF3YWl0IHByb2Nlc3NUaW1lU2VyaWVzRGF0YSh0ZXN0RGF0YSwge1xuICAgICAgICBpbnRlcnZhbDogJzFoJyxcbiAgICAgICAgYWdncmVnYXRpb25UeXBlOiAnYXZnJ1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChhdmdSZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChhdmdSZXN1bHRbMF0udmFsdWUpLnRvQmUoMTIuNSk7IC8vIEF2ZXJhZ2Ugb2YgZmlyc3QgdGltZSBwZXJpb2RcbiAgICAgIGV4cGVjdChhdmdSZXN1bHRbMV0udmFsdWUpLnRvQmUoMjIuNSk7IC8vIEF2ZXJhZ2Ugb2Ygc2Vjb25kIHRpbWUgcGVyaW9kXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBjYWNoZWQgcmVzdWx0cyB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhY2hlZFJlc3VsdCA9IFtcbiAgICAgICAgeyB0aW1lc3RhbXA6ICcyMDI0LTAzLTAxVDAwOjAwOjAwWicsIHZhbHVlOiAxMDAgfVxuICAgICAgXTtcbiAgICAgIHJlZGlzQ2xpZW50LmdldC5tb2NrUmVzb2x2ZWRWYWx1ZShKU09OLnN0cmluZ2lmeShjYWNoZWRSZXN1bHQpKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvY2Vzc1RpbWVTZXJpZXNEYXRhKHRlc3REYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChjYWNoZWRSZXN1bHQpO1xuICAgICAgZXhwZWN0KG1lYXN1cmVPcGVyYXRpb24pLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7ICJdLCJtYXBwaW5ncyI6InNtQkFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxjQUFBLEdBQUFELE9BQUE7Ozs7O0FBS0EsSUFBQUUsTUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBSCxPQUFBOztBQUVBO0FBQ0FJLGFBQUksQ0FBQ0MsSUFBSSxDQUFDLDBCQUEwQixDQUFDO0FBQ3JDRCxhQUFJLENBQUNDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQzs7QUFFdkNDLFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxNQUFNO0VBQ3pDQyxVQUFVLENBQUMsTUFBTTtJQUNmSCxhQUFJLENBQUNJLGFBQWEsQ0FBQyxDQUFDO0VBQ3RCLENBQUMsQ0FBQzs7RUFFRkYsUUFBUSxDQUFDLGlCQUFpQixFQUFFLE1BQU07SUFDaENHLEVBQUUsQ0FBQyxzREFBc0QsRUFBRSxZQUFZO01BQ3JFLE1BQU1DLFFBQVEsR0FBRyxJQUFBQyxLQUFBLENBQUFDLE9BQUEsRUFBVyxFQUFFQyxNQUFNLEVBQUUs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