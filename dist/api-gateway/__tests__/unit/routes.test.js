"use strict"; /**
 * Unit tests for API Gateway routes
 */

const express = require('express');
const request = require('supertest');
const routes = require('../../routes');
const { forwardRequest, makeServiceRequest } = require('../../utils/service-proxy');

// Mock the service proxy
jest.mock('../../utils/service-proxy');

// Mock the auth middleware
jest.mock('../../middleware/auth.middleware', () => ({
  authenticate: jest.fn((req, res, next) => {
    req.user = { id: 'test-user-id', roles: ['user'] };
    next();
  })
}));

describe('API Gateway Routes', () => {
  let app;

  beforeAll(() => {
    app = require('../../index');
  });

  beforeEach(() => {
    // Reset mock function calls before each test
    jest.clearAllMocks();

    // Create a minimal Express app for testing
    app = express();
    app.use(express.json());
    app.use('/api/v1', routes);
  });

  describe('User Service Routes', () => {
    it('should forward requests to the User Service', async () => {
      // Mock service response
      makeServiceRequest.mockResolvedValue({
        success: true,
        data: {
          service: 'userService',
          user: {
            id: '1',
            username: 'testuser'
          }
        }
      });

      const response = await request(app).
      get('/api/v1/users/1').
      expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.service).toBe('userService');
      expect(response.body.data.user.id).toBe('1');
      expect(response.body.data.user.username).toBe('testuser');
    }, 120000); // Increase timeout to 2 minutes

    test('should forward group requests to the User Service', async () => {
      makeServiceRequest.mockResolvedValue({
        success: true,
        data: {
          service: 'userService',
          groups: [
          { id: '1', name: 'Group 1' }]

        }
      });

      const response = await request(app).
      get('/api/v1/groups').
      expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.service).toBe('userService');
      expect(response.body.data.groups).toHaveLength(1);
    }, 120000);
  });

  describe('Expense Service Routes', () => {
    it('should forward requests to the Expense Service', async () => {
      makeServiceRequest.mockResolvedValue({
        success: true,
        data: {
          service: 'expenseService',
          expenses: []
        }
      });

      const response = await request(app).
      get('/api/v1/expenses').
      expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.service).toBe('expenseService');
    }, 120000);
  });

  describe('Settlement Service Routes', () => {
    it('should forward requests to the Settlement Service', async () => {
      makeServiceRequest.mockResolvedValue({
        success: true,
        data: {
          service: 'settlementService',
          settlements: []
        }
      });

      const response = await request(app).
      get('/api/v1/settlements').
      expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.service).toBe('settlementService');
    }, 120000);

    it('should forward settlement suggestions requests correctly', async () => {
      makeServiceRequest.mockResolvedValue({
        success: true,
        data: {
          service: 'settlementService',
          suggestions: []
        }
      });

      const response = await request(app).
      get('/api/v1/settlements/suggestions').
      expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.service).toBe('settlementService');
    }, 120000);

    it('should forward calculation detail requests correctly', async () => {
      makeServiceRequest.mockResolvedValue({
        success: true,
        data: {
          service: 'settlementService',
          details: {}
        }
      });

      const response = await request(app).
      get('/api/v1/settlements/1/details').
      expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.service).toBe('settlementService');
    }, 120000);
  });

  describe('Notification Service Routes', () => {
    it('should forward requests to the Notification Service', async () => {
      makeServiceRequest.mockResolvedValue({
        success: true,
        data: {
          service: 'notificationService',
          notifications: []
        }
      });

      const response = await request(app).
      get('/api/v1/notifications').
      expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.service).toBe('notificationService');
    }, 120000);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJlcXVlc3QiLCJyb3V0ZXMiLCJmb3J3YXJkUmVxdWVzdCIsIm1ha2VTZXJ2aWNlUmVxdWVzdCIsImplc3QiLCJtb2NrIiwiYXV0aGVudGljYXRlIiwiZm4iLCJyZXEiLCJyZXMiLCJuZXh0IiwidXNlciIsImlkIiwicm9sZXMiLCJkZXNjcmliZSIsImFwcCIsImJlZm9yZUFsbCIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwidXNlIiwianNvbiIsIml0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJzdWNjZXNzIiwiZGF0YSIsInNlcnZpY2UiLCJ1c2VybmFtZSIsInJlc3BvbnNlIiwiZ2V0IiwiZXhwZWN0IiwiYm9keSIsInRvQmUiLCJ0ZXN0IiwiZ3JvdXBzIiwibmFtZSIsInRvSGF2ZUxlbmd0aCIsImV4cGVuc2VzIiwic2V0dGxlbWVudHMiLCJzdWdnZXN0aW9ucyIsImRldGFpbHMiLCJub3RpZmljYXRpb25zIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaS1nYXRld2F5L19fdGVzdHNfXy91bml0L3JvdXRlcy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCB0ZXN0cyBmb3IgQVBJIEdhdGV3YXkgcm91dGVzXG4gKi9cblxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IHJvdXRlcyA9IHJlcXVpcmUoJy4uLy4uL3JvdXRlcycpO1xuY29uc3QgeyBmb3J3YXJkUmVxdWVzdCwgbWFrZVNlcnZpY2VSZXF1ZXN0IH0gPSByZXF1aXJlKCcuLi8uLi91dGlscy9zZXJ2aWNlLXByb3h5Jyk7XG5cbi8vIE1vY2sgdGhlIHNlcnZpY2UgcHJveHlcbmplc3QubW9jaygnLi4vLi4vdXRpbHMvc2VydmljZS1wcm94eScpO1xuXG4vLyBNb2NrIHRoZSBhdXRoIG1pZGRsZXdhcmVcbmplc3QubW9jaygnLi4vLi4vbWlkZGxld2FyZS9hdXRoLm1pZGRsZXdhcmUnLCAoKSA9PiAoe1xuICBhdXRoZW50aWNhdGU6IGplc3QuZm4oKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVxLnVzZXIgPSB7IGlkOiAndGVzdC11c2VyLWlkJywgcm9sZXM6IFsndXNlciddIH07XG4gICAgbmV4dCgpO1xuICB9KVxufSkpO1xuXG5kZXNjcmliZSgnQVBJIEdhdGV3YXkgUm91dGVzJywgKCkgPT4ge1xuICBsZXQgYXBwO1xuICBcbiAgYmVmb3JlQWxsKCgpID0+IHtcbiAgICBhcHAgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuICB9KTtcbiAgXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIFJlc2V0IG1vY2sgZnVuY3Rpb24gY2FsbHMgYmVmb3JlIGVhY2ggdGVzdFxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhIG1pbmltYWwgRXhwcmVzcyBhcHAgZm9yIHRlc3RpbmdcbiAgICBhcHAgPSBleHByZXNzKCk7XG4gICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gICAgYXBwLnVzZSgnL2FwaS92MScsIHJvdXRlcyk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ1VzZXIgU2VydmljZSBSb3V0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmb3J3YXJkIHJlcXVlc3RzIHRvIHRoZSBVc2VyIFNlcnZpY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHNlcnZpY2UgcmVzcG9uc2VcbiAgICAgIG1ha2VTZXJ2aWNlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzZXJ2aWNlOiAndXNlclNlcnZpY2UnLFxuICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgICB1c2VybmFtZTogJ3Rlc3R1c2VyJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvdXNlcnMvMScpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuc2VydmljZSkudG9CZSgndXNlclNlcnZpY2UnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEudXNlci5pZCkudG9CZSgnMScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS51c2VyLnVzZXJuYW1lKS50b0JlKCd0ZXN0dXNlcicpO1xuICAgIH0sIDEyMDAwMCk7IC8vIEluY3JlYXNlIHRpbWVvdXQgdG8gMiBtaW51dGVzXG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGZvcndhcmQgZ3JvdXAgcmVxdWVzdHMgdG8gdGhlIFVzZXIgU2VydmljZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1ha2VTZXJ2aWNlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzZXJ2aWNlOiAndXNlclNlcnZpY2UnLFxuICAgICAgICAgIGdyb3VwczogW1xuICAgICAgICAgICAgeyBpZDogJzEnLCBuYW1lOiAnR3JvdXAgMScgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvZ3JvdXBzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5zZXJ2aWNlKS50b0JlKCd1c2VyU2VydmljZScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5ncm91cHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9LCAxMjAwMDApO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdFeHBlbnNlIFNlcnZpY2UgUm91dGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZm9yd2FyZCByZXF1ZXN0cyB0byB0aGUgRXhwZW5zZSBTZXJ2aWNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbWFrZVNlcnZpY2VSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNlcnZpY2U6ICdleHBlbnNlU2VydmljZScsXG4gICAgICAgICAgZXhwZW5zZXM6IFtdXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3YxL2V4cGVuc2VzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5zZXJ2aWNlKS50b0JlKCdleHBlbnNlU2VydmljZScpO1xuICAgIH0sIDEyMDAwMCk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ1NldHRsZW1lbnQgU2VydmljZSBSb3V0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmb3J3YXJkIHJlcXVlc3RzIHRvIHRoZSBTZXR0bGVtZW50IFNlcnZpY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtYWtlU2VydmljZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc2VydmljZTogJ3NldHRsZW1lbnRTZXJ2aWNlJyxcbiAgICAgICAgICBzZXR0bGVtZW50czogW11cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvc2V0dGxlbWVudHMnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnNlcnZpY2UpLnRvQmUoJ3NldHRsZW1lbnRTZXJ2aWNlJyk7XG4gICAgfSwgMTIwMDAwKTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIGZvcndhcmQgc2V0dGxlbWVudCBzdWdnZXN0aW9ucyByZXF1ZXN0cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtYWtlU2VydmljZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc2VydmljZTogJ3NldHRsZW1lbnRTZXJ2aWNlJyxcbiAgICAgICAgICBzdWdnZXN0aW9uczogW11cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvc2V0dGxlbWVudHMvc3VnZ2VzdGlvbnMnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnNlcnZpY2UpLnRvQmUoJ3NldHRsZW1lbnRTZXJ2aWNlJyk7XG4gICAgfSwgMTIwMDAwKTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIGZvcndhcmQgY2FsY3VsYXRpb24gZGV0YWlsIHJlcXVlc3RzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1ha2VTZXJ2aWNlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzZXJ2aWNlOiAnc2V0dGxlbWVudFNlcnZpY2UnLFxuICAgICAgICAgIGRldGFpbHM6IHt9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL3YxL3NldHRsZW1lbnRzLzEvZGV0YWlscycpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuc2VydmljZSkudG9CZSgnc2V0dGxlbWVudFNlcnZpY2UnKTtcbiAgICB9LCAxMjAwMDApO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdOb3RpZmljYXRpb24gU2VydmljZSBSb3V0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmb3J3YXJkIHJlcXVlc3RzIHRvIHRoZSBOb3RpZmljYXRpb24gU2VydmljZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1ha2VTZXJ2aWNlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzZXJ2aWNlOiAnbm90aWZpY2F0aW9uU2VydmljZScsXG4gICAgICAgICAgbm90aWZpY2F0aW9uczogW11cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9hcGkvdjEvbm90aWZpY2F0aW9ucycpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuc2VydmljZSkudG9CZSgnbm90aWZpY2F0aW9uU2VydmljZScpO1xuICAgIH0sIDEyMDAwMCk7XG4gIH0pO1xufSk7ICJdLCJtYXBwaW5ncyI6ImNBQUE7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUUsTUFBTSxHQUFHRixPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ3RDLE1BQU0sRUFBRUcsY0FBYyxFQUFFQyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUdKLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQzs7QUFFbkY7QUFDQUssSUFBSSxDQUFDQyxJQUFJLENBQUMsMkJBQTJCLENBQUM7O0FBRXRDO0FBQ0FELElBQUksQ0FBQ0MsSUFBSSxDQUFDLGtDQUFrQyxFQUFFLE9BQU87RUFDbkRDLFlBQVksRUFBRUYsSUFBSSxDQUFDRyxFQUFFLENBQUMsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztJQUN4Q0YsR0FBRyxDQUFDRyxJQUFJLEdBQUcsRUFBRUMsRUFBRSxFQUFFLGNBQWMsRUFBRUMsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNsREgsSUFBSSxDQUFDLENBQUM7RUFDUixDQUFDO0FBQ0gsQ0FBQyxDQUFDLENBQUM7O0FBRUhJLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxNQUFNO0VBQ25DLElBQUlDLEdBQUc7O0VBRVBDLFNBQVMsQ0FBQyxNQUFNO0lBQ2RELEdBQUcsR0FBR2hCLE9BQU8sQ0FBQyxhQUFhLENBQUM7RUFDOUIsQ0FBQyxDQUFDOztFQUVGa0IsVUFBVSxDQUFDLE1BQU07SUFDZjtJQUNBYixJQUFJLENBQUNjLGFBQWEsQ0FBQyxDQUFDOztJQUVwQjtJQUNBSCxHQUFHLEdBQUdqQixPQUFPLENBQUMsQ0FBQztJQUNmaUIsR0FBRyxDQUFDSSxHQUFH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