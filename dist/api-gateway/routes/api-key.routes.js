"use strict";var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _trim = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/trim"));var _find = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/find"));const express = require('express');
const { body, query } = require('express-validator');
const validateRequest = require('../middleware/validate-request');
const authMiddleware = require('../middleware/auth');

/**
 * Create API key routes
 * @param {ApiKeyService} apiKeyService - API key service instance
 * @returns {Router} Express router
 */
const createApiKeyRoutes = (apiKeyService) => {var _context;
  const router = express.Router();

  // Require authentication for all routes
  router.use(authMiddleware);

  /**
   * Generate new API key
   */
  router.post(
    '/',
    [
    (0, _trim.default)(_context = body('name').isString()).call(_context).notEmpty(),
    body('expiresInDays').optional().isInt({ min: 1, max: 365 }),
    body('permissions').optional().isArray(),
    body('metadata').optional().isObject(),
    validateRequest],

    async (req, res) => {
      try {
        const keyDetails = await apiKeyService.generateKey({
          userId: req.user.id,
          ...req.body
        });

        res.status(201).json({
          message: 'API key generated successfully',
          data: keyDetails
        });
      } catch (error) {
        res.status(500).json({
          error: 'Failed to generate API key',
          code: 'API_KEY_GENERATION_ERROR'
        });
      }
    }
  );

  /**
   * List API keys for user
   */
  router.get(
    '/',
    [
    query('page').optional().isInt({ min: 1 }),
    query('limit').optional().isInt({ min: 1, max: 100 }),
    validateRequest],

    async (req, res) => {
      try {var _context2;
        const { page = 1, limit = 20 } = req.query;
        const skip = (page - 1) * limit;

        const keys = await (0, _find.default)(_context2 = apiKeyService.db.collection('apiKeys')).call(_context2,

        { userId: req.user.id },
        {
          projection: {
            key: 0, // Don't return hashed keys
            _id: 1,
            name: 1,
            status: 1,
            permissions: 1,
            createdAt: 1,
            expiresAt: 1,
            lastUsedAt: 1
          }
        }
        ).
        skip(skip).
        limit(limit).
        toArray();

        res.json({
          message: 'API keys retrieved successfully',
          data: keys
        });
      } catch (error) {
        res.status(500).json({
          error: 'Failed to retrieve API keys',
          code: 'API_KEY_RETRIEVAL_ERROR'
        });
      }
    }
  );

  /**
   * Rotate API key
   */
  router.post(
    '/:id/rotate',
    [
    body('currentKey').isString().notEmpty(),
    validateRequest],

    async (req, res) => {
      try {
        const newKeyDetails = await apiKeyService.rotateKey(req.body.currentKey);

        res.json({
          message: 'API key rotated successfully',
          data: {
            newKey: newKeyDetails.key,
            rotationExpiresAt: newKeyDetails.rotationExpiresAt
          }
        });
      } catch (error) {
        if (error.message === 'Invalid or inactive API key') {
          return res.status(400).json({
            error: error.message,
            code: 'API_KEY_INVALID'
          });
        }

        res.status(500).json({
          error: 'Failed to rotate API key',
          code: 'API_KEY_ROTATION_ERROR'
        });
      }
    }
  );

  /**
   * Revoke API key
   */
  router.post(
    '/:id/revoke',
    [
    body('key').isString().notEmpty(),
    body('reason').optional().isString(),
    validateRequest],

    async (req, res) => {
      try {
        await apiKeyService.revokeKey(req.body.key, req.body.reason);

        res.json({
          message: 'API key revoked successfully'
        });
      } catch (error) {
        if (error.message === 'Invalid API key') {
          return res.status(400).json({
            error: error.message,
            code: 'API_KEY_INVALID'
          });
        }

        res.status(500).json({
          error: 'Failed to revoke API key',
          code: 'API_KEY_REVOCATION_ERROR'
        });
      }
    }
  );

  return router;
};

module.exports = createApiKeyRoutes;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHkiLCJxdWVyeSIsInZhbGlkYXRlUmVxdWVzdCIsImF1dGhNaWRkbGV3YXJlIiwiY3JlYXRlQXBpS2V5Um91dGVzIiwiYXBpS2V5U2VydmljZSIsIl9jb250ZXh0Iiwicm91dGVyIiwiUm91dGVyIiwidXNlIiwicG9zdCIsIl90cmltIiwiZGVmYXVsdCIsImlzU3RyaW5nIiwiY2FsbCIsIm5vdEVtcHR5Iiwib3B0aW9uYWwiLCJpc0ludCIsIm1pbiIsIm1heCIsImlzQXJyYXkiLCJpc09iamVjdCIsInJlcSIsInJlcyIsImtleURldGFpbHMiLCJnZW5lcmF0ZUtleSIsInVzZXJJZCIsInVzZXIiLCJpZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGF0YSIsImVycm9yIiwiY29kZSIsImdldCIsIl9jb250ZXh0MiIsInBhZ2UiLCJsaW1pdCIsInNraXAiLCJrZXlzIiwiX2ZpbmQiLCJkYiIsImNvbGxlY3Rpb24iLCJwcm9qZWN0aW9uIiwia2V5IiwiX2lkIiwibmFtZSIsInBlcm1pc3Npb25zIiwiY3JlYXRlZEF0IiwiZXhwaXJlc0F0IiwibGFzdFVzZWRBdCIsInRvQXJyYXkiLCJuZXdLZXlEZXRhaWxzIiwicm90YXRlS2V5IiwiY3VycmVudEtleSIsIm5ld0tleSIsInJvdGF0aW9uRXhwaXJlc0F0IiwicmV2b2tlS2V5IiwicmVhc29uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGktZ2F0ZXdheS9yb3V0ZXMvYXBpLWtleS5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHsgYm9keSwgcXVlcnkgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtdmFsaWRhdG9yJyk7XG5jb25zdCB2YWxpZGF0ZVJlcXVlc3QgPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL3ZhbGlkYXRlLXJlcXVlc3QnKTtcbmNvbnN0IGF1dGhNaWRkbGV3YXJlID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9hdXRoJyk7XG5cbi8qKlxuICogQ3JlYXRlIEFQSSBrZXkgcm91dGVzXG4gKiBAcGFyYW0ge0FwaUtleVNlcnZpY2V9IGFwaUtleVNlcnZpY2UgLSBBUEkga2V5IHNlcnZpY2UgaW5zdGFuY2VcbiAqIEByZXR1cm5zIHtSb3V0ZXJ9IEV4cHJlc3Mgcm91dGVyXG4gKi9cbmNvbnN0IGNyZWF0ZUFwaUtleVJvdXRlcyA9IChhcGlLZXlTZXJ2aWNlKSA9PiB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgLy8gUmVxdWlyZSBhdXRoZW50aWNhdGlvbiBmb3IgYWxsIHJvdXRlc1xuICByb3V0ZXIudXNlKGF1dGhNaWRkbGV3YXJlKTtcblxuICAvKipcbiAgICogR2VuZXJhdGUgbmV3IEFQSSBrZXlcbiAgICovXG4gIHJvdXRlci5wb3N0KFxuICAgICcvJyxcbiAgICBbXG4gICAgICBib2R5KCduYW1lJykuaXNTdHJpbmcoKS50cmltKCkubm90RW1wdHkoKSxcbiAgICAgIGJvZHkoJ2V4cGlyZXNJbkRheXMnKS5vcHRpb25hbCgpLmlzSW50KHsgbWluOiAxLCBtYXg6IDM2NSB9KSxcbiAgICAgIGJvZHkoJ3Blcm1pc3Npb25zJykub3B0aW9uYWwoKS5pc0FycmF5KCksXG4gICAgICBib2R5KCdtZXRhZGF0YScpLm9wdGlvbmFsKCkuaXNPYmplY3QoKSxcbiAgICAgIHZhbGlkYXRlUmVxdWVzdFxuICAgIF0sXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBrZXlEZXRhaWxzID0gYXdhaXQgYXBpS2V5U2VydmljZS5nZW5lcmF0ZUtleSh7XG4gICAgICAgICAgdXNlcklkOiByZXEudXNlci5pZCxcbiAgICAgICAgICAuLi5yZXEuYm9keVxuICAgICAgICB9KTtcblxuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0FQSSBrZXkgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgZGF0YToga2V5RGV0YWlsc1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBBUEkga2V5JyxcbiAgICAgICAgICBjb2RlOiAnQVBJX0tFWV9HRU5FUkFUSU9OX0VSUk9SJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG5cbiAgLyoqXG4gICAqIExpc3QgQVBJIGtleXMgZm9yIHVzZXJcbiAgICovXG4gIHJvdXRlci5nZXQoXG4gICAgJy8nLFxuICAgIFtcbiAgICAgIHF1ZXJ5KCdwYWdlJykub3B0aW9uYWwoKS5pc0ludCh7IG1pbjogMSB9KSxcbiAgICAgIHF1ZXJ5KCdsaW1pdCcpLm9wdGlvbmFsKCkuaXNJbnQoeyBtaW46IDEsIG1heDogMTAwIH0pLFxuICAgICAgdmFsaWRhdGVSZXF1ZXN0XG4gICAgXSxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgcGFnZSA9IDEsIGxpbWl0ID0gMjAgfSA9IHJlcS5xdWVyeTtcbiAgICAgICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgICAgICBjb25zdCBrZXlzID0gYXdhaXQgYXBpS2V5U2VydmljZS5kYi5jb2xsZWN0aW9uKCdhcGlLZXlzJylcbiAgICAgICAgICAuZmluZChcbiAgICAgICAgICAgIHsgdXNlcklkOiByZXEudXNlci5pZCB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwcm9qZWN0aW9uOiB7XG4gICAgICAgICAgICAgICAga2V5OiAwLCAvLyBEb24ndCByZXR1cm4gaGFzaGVkIGtleXNcbiAgICAgICAgICAgICAgICBfaWQ6IDEsXG4gICAgICAgICAgICAgICAgbmFtZTogMSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDEsXG4gICAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IDEsXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiAxLFxuICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogMSxcbiAgICAgICAgICAgICAgICBsYXN0VXNlZEF0OiAxXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICAgLnNraXAoc2tpcClcbiAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgLnRvQXJyYXkoKTtcblxuICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0FQSSBrZXlzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgIGRhdGE6IGtleXNcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcmV0cmlldmUgQVBJIGtleXMnLFxuICAgICAgICAgIGNvZGU6ICdBUElfS0VZX1JFVFJJRVZBTF9FUlJPUidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIC8qKlxuICAgKiBSb3RhdGUgQVBJIGtleVxuICAgKi9cbiAgcm91dGVyLnBvc3QoXG4gICAgJy86aWQvcm90YXRlJyxcbiAgICBbXG4gICAgICBib2R5KCdjdXJyZW50S2V5JykuaXNTdHJpbmcoKS5ub3RFbXB0eSgpLFxuICAgICAgdmFsaWRhdGVSZXF1ZXN0XG4gICAgXSxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld0tleURldGFpbHMgPSBhd2FpdCBhcGlLZXlTZXJ2aWNlLnJvdGF0ZUtleShyZXEuYm9keS5jdXJyZW50S2V5KTtcblxuICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0FQSSBrZXkgcm90YXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG5ld0tleTogbmV3S2V5RGV0YWlscy5rZXksXG4gICAgICAgICAgICByb3RhdGlvbkV4cGlyZXNBdDogbmV3S2V5RGV0YWlscy5yb3RhdGlvbkV4cGlyZXNBdFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ0ludmFsaWQgb3IgaW5hY3RpdmUgQVBJIGtleScpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICBjb2RlOiAnQVBJX0tFWV9JTlZBTElEJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHJvdGF0ZSBBUEkga2V5JyxcbiAgICAgICAgICBjb2RlOiAnQVBJX0tFWV9ST1RBVElPTl9FUlJPUidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIC8qKlxuICAgKiBSZXZva2UgQVBJIGtleVxuICAgKi9cbiAgcm91dGVyLnBvc3QoXG4gICAgJy86aWQvcmV2b2tlJyxcbiAgICBbXG4gICAgICBib2R5KCdrZXknKS5pc1N0cmluZygpLm5vdEVtcHR5KCksXG4gICAgICBib2R5KCdyZWFzb24nKS5vcHRpb25hbCgpLmlzU3RyaW5nKCksXG4gICAgICB2YWxpZGF0ZVJlcXVlc3RcbiAgICBdLFxuICAgIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgYXBpS2V5U2VydmljZS5yZXZva2VLZXkocmVxLmJvZHkua2V5LCByZXEuYm9keS5yZWFzb24pO1xuXG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiAnQVBJIGtleSByZXZva2VkIHN1Y2Nlc3NmdWxseSdcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ0ludmFsaWQgQVBJIGtleScpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICBjb2RlOiAnQVBJX0tFWV9JTlZBTElEJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHJldm9rZSBBUEkga2V5JyxcbiAgICAgICAgICBjb2RlOiAnQVBJX0tFWV9SRVZPQ0FUSU9OX0VSUk9SJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG5cbiAgcmV0dXJuIHJvdXRlcjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQXBpS2V5Um91dGVzOyAiXSwibWFwcGluZ3MiOiJnVEFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssQ0FBQyxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNwRCxNQUFNRyxlQUFlLEdBQUdILE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQztBQUNqRSxNQUFNSSxjQUFjLEdBQUdKLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQzs7QUFFcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1LLGtCQUFrQixHQUFHQSxDQUFDQyxhQUFhLEtBQUssS0FBQUMsUUFBQTtFQUM1QyxNQUFNQyxNQUFNLEdBQUdULE9BQU8sQ0FBQ1UsTUFBTSxDQUFDLENBQUM7O0VBRS9CO0VBQ0FELE1BQU0sQ0FBQ0UsR0FBRyxDQUFDTixjQUFjLENBQUM7O0VBRTFCO0FBQ0Y7QUFDQTtFQUNFSSxNQUFN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